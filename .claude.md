# OneAgent Development Guidelines

## Project Overview

OneAgent is a product platform for building AI-powered tools that integrate with GraphQL APIs. This repository contains multiple implementations of the OneAgent concept.

## Brand Guidelines

### Naming Conventions
- **OneAgent** = Product/Brand name (PascalCase, one word)
- **one-agent** = Repository/folder name (kebab-case)
- **oneagent** = Python package name (lowercase, one word)

### Implementation Structure
- Each implementation lives in its own folder (`/mcp`, `/sdk`, `/cli`, etc.)
- Each implementation has its own README.md and .claude.md
- Shared patterns are documented at the root level

## Development Principles

### 1. Modular Architecture
- Each implementation is self-contained
- Shared code should be clearly documented
- Dependencies between implementations should be minimal

### 2. GraphQL Integration
- All implementations connect to GraphQL APIs
- Use consistent error handling patterns
- Validate inputs before API calls
- Implement proper authentication flows

### 3. Documentation Standards
- Root README explains the product vision
- Implementation READMEs provide specific setup instructions
- .claude.md files contain development rules
- Code should be self-documenting with clear comments

### 4. Testing Philosophy
- Each implementation should have comprehensive tests
- Test both success and error scenarios
- Validate GraphQL integration thoroughly
- Test configuration management

## File Organization

### Root Level
- `README.md` - Product overview and navigation
- `.claude.md` - Global development rules (this file)
- `.gitignore` - Repository-wide ignore patterns

### Implementation Level
- `README.md` - Implementation-specific documentation
- `.claude.md` - Implementation-specific development rules
- Source code in appropriate structure for the platform

### Archive Level
- `_archive/` - Contains deprecated implementations
- Keep minimal working examples for reference
- Document why implementations were archived

## Code Standards

### Python (MCP Implementation)
- Use FastMCP framework patterns
- Follow PEP 8 style guidelines
- Use type hints for all functions
- Implement comprehensive error handling
- Use environment variables for configuration

### TypeScript (Archived)
- Follow TypeScript best practices
- Use Zod for input validation
- Implement proper error boundaries
- Use async/await patterns consistently

## Configuration Management

### Environment Variables
- Use `.env.local` for local development
- Never commit sensitive credentials
- Provide clear documentation for required variables
- Validate configuration on startup

### API Integration
- Always validate API responses
- Implement retry logic for network failures
- Use proper authentication headers
- Handle rate limiting gracefully

## Error Handling

### General Principles
- Provide clear, actionable error messages
- Log errors with sufficient context
- Don't expose sensitive information
- Implement circuit breakers for external services

### Loop Prevention
- Track failed attempts per tool/operation
- Detect repeated failures with similar parameters
- Provide explicit "LOOP DETECTED" messages
- Guide users toward resolution

## Security Guidelines

### Credentials
- Never hardcode API keys or secrets
- Use environment variables for all sensitive data
- Implement proper token refresh flows
- Mask sensitive data in logs and responses

### Input Validation
- Validate all user inputs
- Sanitize file paths and URLs
- Check file types and sizes
- Implement proper SQL injection prevention

## Testing Requirements

### Unit Tests
- Test individual functions and methods
- Mock external dependencies
- Test error conditions
- Validate input/output formats

### Integration Tests
- Test GraphQL API integration
- Test file upload/download flows
- Test configuration management
- Test authentication flows

### End-to-End Tests
- Test complete user workflows
- Test error recovery scenarios
- Test performance under load
- Test cross-platform compatibility

## Deployment Guidelines

### Development
- Use local development servers
- Implement hot reload for rapid iteration
- Use staging environments for testing
- Document setup procedures clearly

### Production
- Use proper process management
- Implement health checks
- Monitor performance metrics
- Use proper logging levels

## Contributing

### Pull Request Process
1. Create feature branch from main
2. Implement changes following guidelines
3. Add/update tests as needed
4. Update documentation
5. Submit PR with clear description

### Code Review
- Review for adherence to guidelines
- Check test coverage
- Validate documentation updates
- Ensure security best practices

## Support

For questions or issues:
1. Check implementation-specific documentation
2. Review error logs and troubleshooting guides
3. Contact development team for assistance
4. Create issues for bugs or feature requests

---

**Remember**: OneAgent is about making AI agents that actually work with real data. Keep the user experience simple while handling complexity behind the scenes.
